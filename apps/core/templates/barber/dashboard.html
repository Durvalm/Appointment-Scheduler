{% extends 'barber/base.html' %}

{% block content %}

<section class="employee-dashboard">
    <div class="container">

        <div class="row pb-4">
            <div class="col align-self-center ">
                <h3 style="padding-top: 30px;">Appointments</h3>
            </div>
             <div class="col align-self-end" style="margin-left: 70px;">
                <a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#create-appointment">
                    Create Appointment
                </a>
                {% include 'barber/includes/create-appointment.html' %}
            </div>
        </div>
        
        <table class="table">
            <thead>
              <tr>
                <th scope="col">User</th>
                <th scope="col">Schedule</th>
                <th scope="col">Total</th>
                <th scope="col">Service</th>
                <th scope="col">Completed</th>
                <th scope="col">Paid</th>
              </tr>
            </thead>
    
            <tbody>
              {% for appointment in appointments %}
              <tr>
                <td scope="row" >{{appointment.user.username}}</td>
                <td scope="row">{{appointment.schedule}}</td>
                <td scope="row">${{appointment.total}}</td>
                <td scope="row">{{appointment.service.name}}</td>
                {% if appointment.is_completed %}
                <td scope="row"><a href="{% url 'complete-appointment' id=appointment.id %}" class="btn btn-success btn-sm">Yes</a></td>
                {% else %}
                <td scope="row"><a href="{% url 'complete-appointment' id=appointment.id %}" class="btn btn-warning btn-sm">No</a></td>
                {% endif %}
                
                {% if appointment.is_paid %}
                <td scope="row"><a href="{% url 'pay-appointment' id=appointment.id %}" class="btn btn-success btn-sm">Yes</a></td>
                {% else %}
                <td scope="row"><a href="{% url 'pay-appointment' id=appointment.id %}" class="btn btn-warning btn-sm">No</a></td>
                {% endif %}
              </tr>
              {% endfor %}
            </tbody>
    
          </table>
    </div>
</section>

{% endblock %}